<?php
$response = $this->getResponse();

$endDateIsPresent = empty($response['params']['end_date_before']) ? false : true;

$unfinishedIsPresent =  empty($response['params']['unfinished']) ? false : true;

$unfinishedIsChecked =  $response['params']['unfinished'] == 'on' ? 'checked' : '';
?>
<script src="<?= OPERATOR_URL_NOPROTOCOL . '/public/js/';?>RepairCardSearch.js"></script>

<form class="form-inline my-3 clearfix" id="search-form">
  <div class="form-group clearfix ml-3">
    <label class="input-group-addon mr-sm-2" for="start_date_after">Започнат след:</label>
    <input class="search-param mr-sm-2 form-control"
           type="date"
           name="start_date_after"
           value="<?= $response['params']['start_date_after']; ?>"
           id="start_date_after"
    >
  </div>
  <div class="form-group clearfix ml-3">
    <label class="input-group-addon mr-sm-2" for="end_date_before">Завършен преди: </label>
    <input class="search-param mr-sm-2 form-control"
           type="date"
           name="end_date_before"
           <?= $unfinishedIsPresent ? 'disabled' : ''; ?>
           value="<?= $response['params']['end_date_before']; ?>"
           id="end_date_before"
    >
  </div>
  <div class="form-group clearfix ml-3">
    <label class="input-group mr-sm-2" for="license_number">Лицензионен номер</label>
    <select id="license_number"
            name="license_number"
            class="search-param form-control custom-select mb-2 mr-sm-2 mb-sm-0"
            data-selected="<?= $response['params']['license_number']; ?>"></select>
  </div>
  <div class="form-group clearfix ml-3">
    <div class="custom-control custom-checkbox mb-2 mr-sm-2 mb-sm-0">
      <input type="checkbox"
             id="unfinished"
             name="unfinished"
          <?= $endDateIsPresent ? 'disabled' : ''; ?>
          <?= $unfinishedIsChecked ?>
             class="search-param custom-control-input">
      <label class="custom-control-label custom-checkbox" for="unfinished">Неприключени ремонти</label>
    </div>
  </div>
  <input type="hidden" value="1" name="advanced">
    <div class="form-group clearfix ml-3">
  <button class="btn btn-outline-success my-2 my-sm-0 float-right" type="submit">Search</button>
    </div>
</form>
